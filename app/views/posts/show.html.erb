<%= turbo_frame_tag @post do %>
  <div class="post">

    <% if @delete_rights %>
      <%= link_to 'Delete post', post_path(@post), method: :delete, data: { turbo_method: :delete, turbo_confirm: 'Are you sure you want to delete this post?' } %>
    <% end %>
    
    <%= @post.user.email %>
    <%= @post.body %>


    <%# like button %>
    <div class="like-button">
      <% if @like %>
        <%= button_to 'Unlike', like_path(@like, post_id: @post.id), method: :delete, data: { turbo_method: :delete } %>
      <% else %>
        <%= button_to 'Like', post_likes_path(@post), data: { turbo_method: 'post' } %>
      <% end %>
      <div class="like-count"><%= @post.liking_users.size if @post.liking_users.size > 0 %></div>
    </div>


    <%# comments %>
    <%= turbo_frame_tag id="new_comment", src:new_post_comment_path(@post) %>

    <div id="comments">
      <% @post.comments.all.order(created_at: :desc).each do |comment| %>
        <%= render partial: 'comments/comment', object: comment %>
      <% end %>
    </div>

  </div>
<% end %>